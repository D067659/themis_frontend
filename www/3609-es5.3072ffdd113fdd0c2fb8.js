!function(){function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){a=!0,c=e},f:function(){try{l||null==i.return||i.return()}finally{if(a)throw c}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(self.webpackChunkthemis_frontend=self.webpackChunkthemis_frontend||[]).push([[3609],{3609:function(t,o,r){"use strict";r.r(o),r.d(o,{MatchesPageModule:function(){return x}});var c=r(8583),l=r(665),a=r(3083),u=r(2555),s=r(4762),f=r(639),d=r(4572);function g(e,t){if(1&e&&(f.TgZ(0,"ion-title"),f._uU(1),f.qZA()),2&e){var n=f.oxw();f.xp6(1),f.Oqu(n.selectedClub.name)}}function p(e,t){1&e&&(f.TgZ(0,"ion-title"),f._uU(1,"W\xe4hle deinen Verein"),f.qZA())}function h(e,t){if(1&e){var n=f.EpF();f.TgZ(0,"ion-button",5),f.NdJ("click",function(){return f.CHM(n),f.oxw().resetSelectedClub()}),f._uU(1," Ausgew\xe4hlter Verein \xe4ndern "),f.qZA()}}function b(e,t){if(1&e){var n=f.EpF();f.TgZ(0,"ion-list"),f.TgZ(1,"ion-card",7),f.NdJ("click",function(){var e=f.CHM(n).$implicit;return f.oxw(2).setSelectedClub(e)}),f.TgZ(2,"ion-card-content"),f._uU(3),f.qZA(),f.qZA(),f.qZA()}if(2&e){var i=t.$implicit;f.xp6(3),f.hij(" ",i.name," ")}}function Z(e,t){if(1&e&&(f.TgZ(0,"ion-grid"),f.YNc(1,b,4,1,"ion-list",6),f.qZA()),2&e){var n=f.oxw();f.xp6(1),f.Q6J("ngForOf",n.clubs)}}function m(e,t){if(1&e){var n=f.EpF();f.TgZ(0,"ion-list"),f.TgZ(1,"ion-card"),f.TgZ(2,"ion-card-header"),f.TgZ(3,"ion-card-subtitle"),f._uU(4),f.qZA(),f.TgZ(5,"ion-card-title"),f._uU(6),f.ALo(7,"date"),f.qZA(),f.qZA(),f.TgZ(8,"div"),f.TgZ(9,"ion-item",9),f._UZ(10,"ion-icon",10),f.TgZ(11,"ion-label"),f._uU(12),f.ALo(13,"date"),f.qZA(),f.qZA(),f.TgZ(14,"ion-item",9),f._UZ(15,"ion-icon",11),f.TgZ(16,"ion-label"),f._uU(17),f.qZA(),f.qZA(),f.TgZ(18,"ion-item",9),f._UZ(19,"ion-icon",12),f.TgZ(20,"ion-label",9),f._uU(21),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"div"),f.TgZ(23,"p",13),f.TgZ(24,"b"),f._uU(25,"Teilnahme"),f.qZA(),f.qZA(),f.TgZ(26,"ion-segment",14),f.NdJ("ngModelChange",function(e){return f.CHM(n).$implicit.doParticipate=e})("ngModelChange",function(){var e=f.CHM(n).$implicit;return f.oxw(2).selectParticipation(e)}),f.TgZ(27,"ion-segment-button",15),f._UZ(28,"ion-icon",16),f.TgZ(29,"ion-label"),f._uU(30,"Ja"),f.qZA(),f.qZA(),f.TgZ(31,"ion-segment-button",17),f.TgZ(32,"ion-label"),f._uU(33,"Nein"),f.qZA(),f._UZ(34,"ion-icon",18),f.qZA(),f.qZA(),f.qZA(),f._UZ(35,"div"),f.qZA(),f.qZA()}if(2&e){var i=t.$implicit;f.xp6(4),f.AsE("",i.isHome?"Heimspiel":"Ausw\xe4rtsspiel"," gegen ",i.opponent," "),f.xp6(2),f.Oqu(f.xi3(7,8,i.startDate,"EE, dd.MM.yy")),f.xp6(6),f.hij(" ",f.Dn7(13,11,i.startDate,"HH:mm ","+0000")," Uhr"),f.xp6(5),f.Oqu(i.city),f.xp6(4),f.Oqu(i.meetingPoint),f.xp6(5),f.Q6J("ngModel",i.doParticipate)("disabled",i.isBlocked)}}function v(e,t){if(1&e&&(f.TgZ(0,"ion-text",19),f._uU(1),f.qZA()),2&e){var n=f.oxw(2);f.xp6(1),f.hij("Keine bevorstehenden Spiele f\xfcr ",n.selectedClub.name," gefunden. ")}}function A(e,t){if(1&e&&(f.TgZ(0,"ion-grid"),f.YNc(1,m,36,15,"ion-list",6),f.YNc(2,v,2,1,"ion-text",8),f.qZA()),2&e){var n=f.oxw();f.xp6(1),f.Q6J("ngForOf",n.matches),f.xp6(1),f.Q6J("ngIf",0==(null==n.matches?null:n.matches.length))}}var y,T,q=[{path:"",component:(y=function(){function t(e,i){n(this,t),this.apiService=e,this.toastController=i,this.selectedClub=null,this.clubs=[],this.matches=[],this.datepickerinput=null,this.today=2021}var o,r,c;return o=t,(r=[{key:"ngOnInit",value:function(){this.selectedClub=this.apiService.currentUser.selectedClub,this.selectedClub?this.getAllMatches():(this.getPossibleClubs(),1==this.clubs.length&&this.setSelectedClub(this.clubs[0]))}},{key:"getPossibleClubs",value:function(){var t,n=this,i=e(this.apiService.currentUser.clubs);try{for(i.s();!(t=i.n()).done;){var o=t.value;this.apiService.getClubInformation(o.clubId).subscribe(function(e){n.clubs.push(e)})}}catch(r){i.e(r)}finally{i.f()}}},{key:"setSelectedClub",value:function(e){this.selectedClub=e,this.apiService.currentUser.selectedClub=this.selectedClub,this.getAllMatches()}},{key:"getAllMatches",value:function(){var e=this;this.apiService.getAllMatches(this.selectedClub._id).subscribe(function(t){t.forEach(function(t){e.apiService.getParticipationForMatch(t.clubId,t._id).subscribe(function(e){t.doParticipate=null==e?void 0:e.hasTime})}),e.matches=t})}},{key:"toggleParticipation",value:function(e){e.doParticipate=!1}},{key:"selectParticipation",value:function(e){var t=this;this.apiService.setParticipationForMatch(e.clubId,e._id,e.doParticipate).subscribe(function(n){return(0,s.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isBlocked=!0,i=n.hasTime?"best\xe4tigt":"abgelehnt",t.next=4,this.toastController.create({message:"Teilnahme wurde ".concat(i),duration:2e3,color:n.hasTime?"success":"danger"});case 4:(o=t.sent).present(),o.onDidDismiss().then(function(){e.isBlocked=!1});case 6:case"end":return t.stop()}},t,this)}))})}},{key:"resetSelectedClub",value:function(){this.selectedClub=null,this.matches=null}},{key:"test",value:function(){console.log(this.datepickerinput)}}])&&i(o.prototype,r),c&&i(o,c),t}(),y.\u0275fac=function(e){return new(e||y)(f.Y36(d.s),f.Y36(a.yF))},y.\u0275cmp=f.Xpm({type:y,selectors:[["app-matches"]],decls:16,vars:6,consts:[["slot","start"],[4,"ngIf"],["size","12","size-md","6","offset-md","3"],["type","button","expand","block","fill","clear",3,"click",4,"ngIf"],["displayFormat","D MMM YYYY H:mm","min","2021","max","2023","placeholder","Datum w\xe4hlen",3,"ngModel","ionChange","ngModelChange"],["type","button","expand","block","fill","clear",3,"click"],[4,"ngFor","ngForOf"],["button","",3,"click"],["class","center",4,"ngIf"],["text-wrap",""],["name","time-outline","slot","start"],["name","flag-outline","slot","start"],["name","location-outline","slot","start"],[2,"text-align","center"],["color","primary","scrollable","",1,"center",3,"ngModel","disabled","ngModelChange"],["value","true"],["name","checkmark-circle-outline"],["value","false"],["name","close-circle-outline"],[1,"center"]],template:function(e,t){1&e&&(f.TgZ(0,"ion-header"),f.TgZ(1,"ion-toolbar"),f.TgZ(2,"ion-buttons",0),f._UZ(3,"ion-menu-button"),f.qZA(),f.YNc(4,g,2,1,"ion-title",1),f.YNc(5,p,2,0,"ion-title",1),f.qZA(),f.qZA(),f.TgZ(6,"ion-content"),f.TgZ(7,"ion-row"),f.TgZ(8,"ion-col",2),f.YNc(9,h,2,0,"ion-button",3),f.YNc(10,Z,2,1,"ion-grid",1),f.YNc(11,A,3,2,"ion-grid",1),f.TgZ(12,"ion-item"),f.TgZ(13,"ion-label"),f._uU(14,"Datum"),f.qZA(),f.TgZ(15,"ion-datetime",4),f.NdJ("ionChange",function(){return t.test()})("ngModelChange",function(e){return t.datepickerinput=e}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(4),f.Q6J("ngIf",t.selectedClub),f.xp6(1),f.Q6J("ngIf",!t.selectedClub),f.xp6(4),f.Q6J("ngIf",t.selectedClub),f.xp6(1),f.Q6J("ngIf",!t.selectedClub),f.xp6(1),f.Q6J("ngIf",t.selectedClub),f.xp6(4),f.Q6J("ngModel",t.datepickerinput))},directives:[a.Gu,a.sr,a.Sm,a.fG,c.O5,a.W2,a.Nd,a.wI,a.Ie,a.Q$,a.QI,a.x4,l.JJ,l.On,a.wd,a.YG,a.jY,c.sg,a.q_,a.PM,a.FN,a.Zi,a.tO,a.gZ,a.gu,a.cJ,a.GO,a.yW],pipes:[c.uU],styles:[".center[_ngcontent-%COMP%]{margin:3px auto;text-align:center;display:flex;justify-content:center}"]}),y)}],C=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[u.Bz.forChild(q)],u.Bz]}),e}(),x=((T=function e(){n(this,e)}).\u0275fac=function(e){return new(e||T)},T.\u0275mod=f.oAB({type:T}),T.\u0275inj=f.cJS({imports:[[c.ez,l.u5,a.Pc,C]]}),T)}}])}();