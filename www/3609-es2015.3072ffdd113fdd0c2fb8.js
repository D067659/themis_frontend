(self.webpackChunkthemis_frontend=self.webpackChunkthemis_frontend||[]).push([[3609],{3609:function(e,t,i){"use strict";i.r(t),i.d(t,{MatchesPageModule:function(){return q}});var n=i(8583),o=i(665),c=i(3083),l=i(2555),s=i(4762),r=i(639),a=i(4572);function u(e,t){if(1&e&&(r.TgZ(0,"ion-title"),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.selectedClub.name)}}function d(e,t){1&e&&(r.TgZ(0,"ion-title"),r._uU(1,"W\xe4hle deinen Verein"),r.qZA())}function g(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-button",5),r.NdJ("click",function(){return r.CHM(e),r.oxw().resetSelectedClub()}),r._uU(1," Ausgew\xe4hlter Verein \xe4ndern "),r.qZA()}}function p(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-list"),r.TgZ(1,"ion-card",7),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).setSelectedClub(t)}),r.TgZ(2,"ion-card-content"),r._uU(3),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(3),r.hij(" ",e.name," ")}}function Z(e,t){if(1&e&&(r.TgZ(0,"ion-grid"),r.YNc(1,p,4,1,"ion-list",6),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.clubs)}}function h(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-list"),r.TgZ(1,"ion-card"),r.TgZ(2,"ion-card-header"),r.TgZ(3,"ion-card-subtitle"),r._uU(4),r.qZA(),r.TgZ(5,"ion-card-title"),r._uU(6),r.ALo(7,"date"),r.qZA(),r.qZA(),r.TgZ(8,"div"),r.TgZ(9,"ion-item",9),r._UZ(10,"ion-icon",10),r.TgZ(11,"ion-label"),r._uU(12),r.ALo(13,"date"),r.qZA(),r.qZA(),r.TgZ(14,"ion-item",9),r._UZ(15,"ion-icon",11),r.TgZ(16,"ion-label"),r._uU(17),r.qZA(),r.qZA(),r.TgZ(18,"ion-item",9),r._UZ(19,"ion-icon",12),r.TgZ(20,"ion-label",9),r._uU(21),r.qZA(),r.qZA(),r.qZA(),r.TgZ(22,"div"),r.TgZ(23,"p",13),r.TgZ(24,"b"),r._uU(25,"Teilnahme"),r.qZA(),r.qZA(),r.TgZ(26,"ion-segment",14),r.NdJ("ngModelChange",function(t){return r.CHM(e).$implicit.doParticipate=t})("ngModelChange",function(){const t=r.CHM(e).$implicit;return r.oxw(2).selectParticipation(t)}),r.TgZ(27,"ion-segment-button",15),r._UZ(28,"ion-icon",16),r.TgZ(29,"ion-label"),r._uU(30,"Ja"),r.qZA(),r.qZA(),r.TgZ(31,"ion-segment-button",17),r.TgZ(32,"ion-label"),r._uU(33,"Nein"),r.qZA(),r._UZ(34,"ion-icon",18),r.qZA(),r.qZA(),r.qZA(),r._UZ(35,"div"),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(4),r.AsE("",e.isHome?"Heimspiel":"Ausw\xe4rtsspiel"," gegen ",e.opponent," "),r.xp6(2),r.Oqu(r.xi3(7,8,e.startDate,"EE, dd.MM.yy")),r.xp6(6),r.hij(" ",r.Dn7(13,11,e.startDate,"HH:mm ","+0000")," Uhr"),r.xp6(5),r.Oqu(e.city),r.xp6(4),r.Oqu(e.meetingPoint),r.xp6(5),r.Q6J("ngModel",e.doParticipate)("disabled",e.isBlocked)}}function b(e,t){if(1&e&&(r.TgZ(0,"ion-text",19),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij("Keine bevorstehenden Spiele f\xfcr ",e.selectedClub.name," gefunden. ")}}function m(e,t){if(1&e&&(r.TgZ(0,"ion-grid"),r.YNc(1,h,36,15,"ion-list",6),r.YNc(2,b,2,1,"ion-text",8),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e.matches),r.xp6(1),r.Q6J("ngIf",0==(null==e.matches?null:e.matches.length))}}const f=[{path:"",component:(()=>{class e{constructor(e,t){this.apiService=e,this.toastController=t,this.selectedClub=null,this.clubs=[],this.matches=[],this.datepickerinput=null,this.today=2021}ngOnInit(){this.selectedClub=this.apiService.currentUser.selectedClub,this.selectedClub?this.getAllMatches():(this.getPossibleClubs(),1==this.clubs.length&&this.setSelectedClub(this.clubs[0]))}getPossibleClubs(){for(const e of this.apiService.currentUser.clubs)this.apiService.getClubInformation(e.clubId).subscribe(e=>{this.clubs.push(e)})}setSelectedClub(e){this.selectedClub=e,this.apiService.currentUser.selectedClub=this.selectedClub,this.getAllMatches()}getAllMatches(){this.apiService.getAllMatches(this.selectedClub._id).subscribe(e=>{e.forEach(e=>{this.apiService.getParticipationForMatch(e.clubId,e._id).subscribe(t=>{e.doParticipate=null==t?void 0:t.hasTime})}),this.matches=e})}toggleParticipation(e){e.doParticipate=!1}selectParticipation(e){this.apiService.setParticipationForMatch(e.clubId,e._id,e.doParticipate).subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){e.isBlocked=!0;const i=t.hasTime?"best\xe4tigt":"abgelehnt",n=yield this.toastController.create({message:`Teilnahme wurde ${i}`,duration:2e3,color:t.hasTime?"success":"danger"});n.present(),n.onDidDismiss().then(()=>{e.isBlocked=!1})}))}resetSelectedClub(){this.selectedClub=null,this.matches=null}test(){console.log(this.datepickerinput)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(a.s),r.Y36(c.yF))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-matches"]],decls:16,vars:6,consts:[["slot","start"],[4,"ngIf"],["size","12","size-md","6","offset-md","3"],["type","button","expand","block","fill","clear",3,"click",4,"ngIf"],["displayFormat","D MMM YYYY H:mm","min","2021","max","2023","placeholder","Datum w\xe4hlen",3,"ngModel","ionChange","ngModelChange"],["type","button","expand","block","fill","clear",3,"click"],[4,"ngFor","ngForOf"],["button","",3,"click"],["class","center",4,"ngIf"],["text-wrap",""],["name","time-outline","slot","start"],["name","flag-outline","slot","start"],["name","location-outline","slot","start"],[2,"text-align","center"],["color","primary","scrollable","",1,"center",3,"ngModel","disabled","ngModelChange"],["value","true"],["name","checkmark-circle-outline"],["value","false"],["name","close-circle-outline"],[1,"center"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",0),r._UZ(3,"ion-menu-button"),r.qZA(),r.YNc(4,u,2,1,"ion-title",1),r.YNc(5,d,2,0,"ion-title",1),r.qZA(),r.qZA(),r.TgZ(6,"ion-content"),r.TgZ(7,"ion-row"),r.TgZ(8,"ion-col",2),r.YNc(9,g,2,0,"ion-button",3),r.YNc(10,Z,2,1,"ion-grid",1),r.YNc(11,m,3,2,"ion-grid",1),r.TgZ(12,"ion-item"),r.TgZ(13,"ion-label"),r._uU(14,"Datum"),r.qZA(),r.TgZ(15,"ion-datetime",4),r.NdJ("ionChange",function(){return t.test()})("ngModelChange",function(e){return t.datepickerinput=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(4),r.Q6J("ngIf",t.selectedClub),r.xp6(1),r.Q6J("ngIf",!t.selectedClub),r.xp6(4),r.Q6J("ngIf",t.selectedClub),r.xp6(1),r.Q6J("ngIf",!t.selectedClub),r.xp6(1),r.Q6J("ngIf",t.selectedClub),r.xp6(4),r.Q6J("ngModel",t.datepickerinput))},directives:[c.Gu,c.sr,c.Sm,c.fG,n.O5,c.W2,c.Nd,c.wI,c.Ie,c.Q$,c.QI,c.x4,o.JJ,o.On,c.wd,c.YG,c.jY,n.sg,c.q_,c.PM,c.FN,c.Zi,c.tO,c.gZ,c.gu,c.cJ,c.GO,c.yW],pipes:[n.uU],styles:[".center[_ngcontent-%COMP%]{margin:3px auto;text-align:center;display:flex;justify-content:center}"]}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[l.Bz.forChild(f)],l.Bz]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[n.ez,o.u5,c.Pc,A]]}),e})()}}]);